{"ast":null,"code":"import { createSlice, createAsyncThunk, nanoid } from '@reduxjs/toolkit';\nimport Axios from 'axios';\nimport authHeader from '../common/authHeader';\nimport serverUrl from '../common/common';\nconst blogUrl = 'api/blog';\nexport const getAllBlogsByUserIDAsync = createAsyncThunk('blogs/getAllBlogsByUserIDAsync', async userID => {\n  const response = await Axios.get(`${serverUrl}${blogUrl}?userID=${userID}`, {\n    headers: authHeader()\n  });\n  const tasks = response.data;\n  return {\n    tasks\n  };\n});\nexport const getBlogBySlugAsync = createAsyncThunk('blog/getBlogBySlugAsync', async slug => {\n  const response = await Axios.get(`${serverUrl}${blogUrl}/get-blog-by-slug?slug=${slug}`, {\n    headers: authHeader()\n  });\n  const tasks = response.data;\n  return {\n    tasks\n  };\n});\nexport const createNewBlogAsync = createAsyncThunk('blog/createNewBlogAsync', async _ref => {\n  let {\n    blogReqData\n  } = _ref;\n  const formData = new FormData();\n  formData.append('title', blogReqData.title);\n  formData.append('coverImg', blogReqData.coverImg);\n  formData.append('topicID', blogReqData.topicID);\n  formData.append('slug', blogReqData.slug);\n  formData.append('content', blogReqData.content);\n  formData.append('quote', blogReqData.quote);\n  formData.append('date', blogReqData.date);\n  formData.append('location', blogReqData.location);\n  formData.append('published', blogReqData.published);\n  formData.append('signature', blogReqData.signature);\n  const response = await Axios.post(serverUrl + blogUrl, formData, {\n    headers: authHeader()\n  });\n  const tasks = response.data;\n  return {\n    tasks\n  };\n});\nexport const updateBlogAsync = createAsyncThunk('blog/updateBlogAsync', async _ref2 => {\n  let {\n    blogReqData\n  } = _ref2;\n  const id = blogReqData._id;\n  const formData = new FormData();\n  console.log(blogReqData);\n  formData.append('title', blogReqData.title);\n  formData.append('coverImg', blogReqData.coverImg);\n  formData.append('topicID', blogReqData.topicID);\n  formData.append('slug', blogReqData.slug);\n  formData.append('content', blogReqData.content);\n  formData.append('quote', blogReqData.quote);\n  formData.append('date', blogReqData.date);\n  formData.append('location', blogReqData.location);\n  formData.append('published', blogReqData.published);\n  formData.append('signature', blogReqData.signature);\n  const response = await Axios.put(`${serverUrl}${blogUrl}/${id}`, formData, {\n    headers: authHeader()\n  });\n  const tasks = response.data;\n  return {\n    tasks\n  };\n});\nexport const deleteBlogAsync = createAsyncThunk('blog/deleteBlogAsync', async id => {\n  const response = await Axios.delete(`${serverUrl}${blogUrl}/${id}`, {\n    headers: authHeader()\n  });\n  window.location.reload(false);\n  const tasks = response.data;\n  return {\n    tasks\n  };\n});\nconst blogSlice = createSlice({\n  name: 'blog',\n  initialState: [],\n  reducers: {},\n  extraReducers: {\n    [getAllBlogsByUserIDAsync.fulfilled]: (state, action) => {\n      console.log('fetching blogs by userID successfully');\n      return action.payload.tasks.result;\n    },\n    [getBlogBySlugAsync.fulfilled]: (state, action) => {\n      console.log('fetching blog by slug successfully');\n      return action.payload.tasks.result;\n    },\n    [createNewBlogAsync.fulfilled]: (state, action) => {\n      console.log('added new blog successfully');\n      return action.payload.tasks.result;\n    },\n    [updateBlogAsync.fulfilled]: (state, action) => {\n      console.log('updated blog successfully');\n      return action.payload.tasks.result;\n    }\n  }\n});\nexport const {} = blogSlice.actions;\nexport const selectPost = state => state.blog.blog;\nexport default blogSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","nanoid","Axios","authHeader","serverUrl","blogUrl","getAllBlogsByUserIDAsync","userID","response","get","headers","tasks","data","getBlogBySlugAsync","slug","createNewBlogAsync","blogReqData","formData","FormData","append","title","coverImg","topicID","content","quote","date","location","published","signature","post","updateBlogAsync","id","_id","console","log","put","deleteBlogAsync","delete","window","reload","blogSlice","name","initialState","reducers","extraReducers","fulfilled","state","action","payload","result","actions","selectPost","blog","reducer"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/features/post/blogSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk, nanoid } from '@reduxjs/toolkit';\r\nimport Axios from 'axios';\r\nimport authHeader from '../common/authHeader';\r\nimport serverUrl from '../common/common';\r\n\r\nconst blogUrl = 'api/blog';\r\n\r\nexport const getAllBlogsByUserIDAsync = createAsyncThunk(\r\n    'blogs/getAllBlogsByUserIDAsync',\r\n    async (userID) => {\r\n        const response = await Axios.get(\r\n            `${serverUrl}${blogUrl}?userID=${userID}`,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const getBlogBySlugAsync = createAsyncThunk(\r\n    'blog/getBlogBySlugAsync',\r\n    async (slug) => {\r\n        const response = await Axios.get(\r\n            `${serverUrl}${blogUrl}/get-blog-by-slug?slug=${slug}`,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const createNewBlogAsync = createAsyncThunk(\r\n    'blog/createNewBlogAsync',\r\n    async ({ blogReqData }) => {\r\n        const formData = new FormData();\r\n        formData.append('title', blogReqData.title);\r\n        formData.append('coverImg', blogReqData.coverImg);\r\n        formData.append('topicID', blogReqData.topicID);\r\n        formData.append('slug', blogReqData.slug);\r\n        formData.append('content', blogReqData.content);\r\n        formData.append('quote', blogReqData.quote);\r\n        formData.append('date', blogReqData.date);\r\n        formData.append('location', blogReqData.location);\r\n        formData.append('published', blogReqData.published);\r\n        formData.append('signature', blogReqData.signature);\r\n        const response = await Axios.post(serverUrl + blogUrl, formData, {\r\n            headers: authHeader(),\r\n        });\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const updateBlogAsync = createAsyncThunk(\r\n    'blog/updateBlogAsync',\r\n    async ({ blogReqData }) => {\r\n        const id = blogReqData._id;\r\n        const formData = new FormData();\r\n        console.log(blogReqData)\r\n        formData.append('title', blogReqData.title);\r\n        formData.append('coverImg', blogReqData.coverImg);\r\n        formData.append('topicID', blogReqData.topicID);\r\n        formData.append('slug', blogReqData.slug);\r\n        formData.append('content', blogReqData.content);\r\n        formData.append('quote', blogReqData.quote);\r\n        formData.append('date', blogReqData.date);\r\n        formData.append('location', blogReqData.location);\r\n        formData.append('published', blogReqData.published);\r\n        formData.append('signature', blogReqData.signature);\r\n        const response = await Axios.put(\r\n            `${serverUrl}${blogUrl}/${id}`,\r\n            formData,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const deleteBlogAsync = createAsyncThunk(\r\n    'blog/deleteBlogAsync',\r\n    async (id) => {\r\n        const response = await Axios.delete(`${serverUrl}${blogUrl}/${id}`, {\r\n            headers: authHeader(),\r\n        });\r\n        window.location.reload(false);\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nconst blogSlice = createSlice({\r\n    name: 'blog',\r\n    initialState: [],\r\n    reducers: {},\r\n    extraReducers: {\r\n        [getAllBlogsByUserIDAsync.fulfilled]: (state, action) => {\r\n            console.log('fetching blogs by userID successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [getBlogBySlugAsync.fulfilled]: (state, action) => {\r\n            console.log('fetching blog by slug successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [createNewBlogAsync.fulfilled]: (state, action) => {\r\n            console.log('added new blog successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [updateBlogAsync.fulfilled]: (state, action) => {\r\n            console.log('updated blog successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n    },\r\n});\r\nexport const {} = blogSlice.actions;\r\n\r\nexport const selectPost = (state) => state.blog.blog;\r\n\r\nexport default blogSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}