{"ast":null,"code":"import _regeneratorRuntime from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{useRef}from\"react\";import{useDispatch}from\"react-redux\";import{getBlogBySlugAsync,updateBlogAsync}from\"../features/post/blogSlice\";import Helmet from\"../components/Helmet\";import{useNavigate,useParams}from\"react-router-dom\";import{useEffect}from\"react\";import{useSelector}from\"react-redux\";import{getUserByUsernameAsync}from\"../features/user/userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditBlog=function EditBlog(_ref){var _JSON$parse;var alias=_ref.alias;var textareaRef=useRef();var imageRef=useRef();var dispatch=useDispatch();var navigate=useNavigate();var params=useParams();var slug=params.slug;var blog=useSelector(function(state){return state.blog;});var _useState=useState(blog),_useState2=_slicedToArray(_useState,2),newBlog=_useState2[0],setNewBlog=_useState2[1];useEffect(function(){if(newBlog.slug!==blog.slug||slug!==blog.slug){dispatch(getBlogBySlugAsync(slug));setNewBlog(blog);}},[slug,dispatch,blog,newBlog.slug]);var handleChange=function handleChange(input){return function(event){setNewBlog(_objectSpread(_objectSpread({},newBlog),{},_defineProperty({},input,event.target.value)));};};// const [image, setImage] = useState();\nvar readImage=function readImage(e){var image=e.target.files[0];};var username=(_JSON$parse=JSON.parse(localStorage.getItem('user')))===null||_JSON$parse===void 0?void 0:_JSON$parse.account.username;var handleNewBlog=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return dispatch(updateBlogAsync({blogReqData:newBlog}));case 3:_context.next=5;return dispatch(getUserByUsernameAsync({username:username}));case 5:navigate(\"/\".concat(alias,\"/\"));case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleNewBlog(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Helmet,{title:\"Ch\\u1EC9nh s\\u1EEBa blog\",children:/*#__PURE__*/_jsx(\"div\",{className:\"new-blog\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"new-blog__form\",onSubmit:handleNewBlog,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:imageRef,onChange:readImage,className:\"new-blog__form__image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"quote\",onChange:handleChange(\"quote\"),className:\"new-blog__form__quote\",placeholder:\"Quote\",value:newBlog===null||newBlog===void 0?void 0:newBlog.quote}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",className:\"new-blog__form__place\",placeholder:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m\",onChange:handleChange(\"location\"),value:newBlog===null||newBlog===void 0?void 0:newBlog.location}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:\"new-blog__form__title\",placeholder:\"Ti\\xEAu \\u0111\\u1EC1\",onChange:handleChange(\"title\"),value:newBlog===null||newBlog===void 0?void 0:newBlog.title}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"content\",className:\"new-blog__form__body\",placeholder:\"N\\u1ED9i dung\",ref:textareaRef,value:newBlog===null||newBlog===void 0?void 0:newBlog.content,onChange:handleChange(\"content\"),onKeyUp:function onKeyUp(e){textareaRef.current.style.height=\"200px\";var height=e.target.scrollHeight;if(height>200){// textareaRef.current.style.height = \"auto\";\ntextareaRef.current.style.height=\"\".concat(height,\"px\");}}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"new-blog__form__signature\",placeholder:\"Ch\\u1EEF k\\xFD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"new-blog__form__create-button\",type:\"submit\",children:\"S\\u1EEDa b\\xE0i vi\\u1EBFt\"})]})})});};export default EditBlog;","map":{"version":3,"names":["React","useState","useRef","useDispatch","getBlogBySlugAsync","updateBlogAsync","Helmet","useNavigate","useParams","useEffect","useSelector","getUserByUsernameAsync","EditBlog","alias","textareaRef","imageRef","dispatch","navigate","params","slug","blog","state","newBlog","setNewBlog","handleChange","input","event","target","value","readImage","e","image","files","username","JSON","parse","localStorage","getItem","account","handleNewBlog","preventDefault","blogReqData","quote","location","title","content","current","style","height","scrollHeight"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/pages/EditBlog.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n\tgetBlogBySlugAsync,\r\n\tupdateBlogAsync,\r\n} from \"../features/post/blogSlice\";\r\nimport Helmet from \"../components/Helmet\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getUserByUsernameAsync } from \"../features/user/userSlice\";\r\n\r\nconst EditBlog = ({ alias }) => {\r\n\tconst textareaRef = useRef();\r\n\tconst imageRef = useRef();\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\tconst params = useParams();\r\n\tconst slug = params.slug;\r\n\tconst blog = useSelector((state) => state.blog);\r\n\tconst [newBlog, setNewBlog] = useState(blog);\r\n\tuseEffect(() => {\r\n\t\tif (newBlog.slug !== blog.slug || slug !== blog.slug) {\r\n\t\t\tdispatch(getBlogBySlugAsync(slug));\r\n\t\t\tsetNewBlog(blog);\r\n\t\t}\r\n\t}, [slug, dispatch, blog, newBlog.slug]);\r\n\r\n\tconst handleChange = (input) => (event) => {\r\n\t\tsetNewBlog({ ...newBlog, [input]: event.target.value });\r\n\t};\r\n\t// const [image, setImage] = useState();\r\n\r\n\tconst readImage = (e) => {\r\n\t\tconst image = e.target.files[0];\r\n\t};\r\n\r\n\t\r\n    const username = JSON.parse(localStorage.getItem('user'))?.account.username;\r\n\r\n\tconst handleNewBlog = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tawait dispatch(updateBlogAsync({ blogReqData: newBlog }));\r\n\t\tawait dispatch(getUserByUsernameAsync({ username: username }));\r\n\t\tnavigate(`/${alias}/`);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Helmet title=\"Chỉnh sừa blog\">\r\n\t\t\t<div className=\"new-blog\">\r\n\t\t\t\t<form className=\"new-blog__form\" onSubmit={handleNewBlog}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tref={imageRef}\r\n\t\t\t\t\t\tonChange={readImage}\r\n\t\t\t\t\t\tclassName=\"new-blog__form__image\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"quote\"\r\n\t\t\t\t\t\tonChange={handleChange(\"quote\")}\r\n\t\t\t\t\t\tclassName=\"new-blog__form__quote\"\r\n\t\t\t\t\t\tplaceholder=\"Quote\"\r\n\t\t\t\t\t\tvalue={newBlog?.quote}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"location\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__place\"\r\n\t\t\t\t\t\tplaceholder=\"Địa điểm\"\r\n\t\t\t\t\t\tonChange={handleChange(\"location\")}\r\n\t\t\t\t\t\tvalue={newBlog?.location}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__title\"\r\n\t\t\t\t\t\tplaceholder=\"Tiêu đề\"\r\n\t\t\t\t\t\tonChange={handleChange(\"title\")}\r\n\t\t\t\t\t\tvalue={newBlog?.title}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__body\"\r\n\t\t\t\t\t\tplaceholder=\"Nội dung\"\r\n\t\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\t\tvalue={newBlog?.content}\r\n\t\t\t\t\t\tonChange={handleChange(\"content\")}\r\n\t\t\t\t\t\tonKeyUp={(e) => {\r\n\t\t\t\t\t\t\ttextareaRef.current.style.height = \"200px\";\r\n\t\t\t\t\t\t\tlet height = e.target.scrollHeight;\r\n\t\t\t\t\t\t\tif (height > 200) {\r\n\t\t\t\t\t\t\t\t// textareaRef.current.style.height = \"auto\";\r\n\t\t\t\t\t\t\t\ttextareaRef.current.style.height = `${height}px`;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}></textarea>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"new-blog__form__signature\"\r\n\t\t\t\t\t\tplaceholder=\"Chữ ký\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button className=\"new-blog__form__create-button\" type=\"submit\">\r\n\t\t\t\t\t\tSửa bài viết\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</Helmet>\r\n\t);\r\n};\r\n\r\nexport default EditBlog;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}