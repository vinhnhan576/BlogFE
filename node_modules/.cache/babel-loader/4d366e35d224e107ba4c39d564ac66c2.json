{"ast":null,"code":"import _slicedToArray from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Helmet from'../components/Helmet';import Topic from'../components/Topic';import{useSelector}from'react-redux';import{Link}from'react-router-dom';import alt from'../assets/image/user/alt.png';import wreath from'../assets/image/laurel-wreath.png';import axios from'axios';import serverUrl from'../features/common/common';import BloggerCard from'../components/BloggerCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){// const allTopics = useSelector((state) => state.topic);\n// const user = JSON.parse(localStorage.getItem('user'))?.account;\nvar user=useSelector(function(state){return state.user;});var blogger=useSelector(function(state){return state.blogger;});var topNum=5;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),topBloggers=_useState2[0],setTopBloggers=_useState2[1];useEffect(function(){// const fetchData = async () => {\n//     const result = (\n//         await\n//     ).data.result;\n//     console.log(result);\n//     setTopBloggers(topBloggers);\n//     console.log(topBloggers);\n// };\n// fetchData();\naxios(\"\".concat(serverUrl,\"api/user/get-top-bloggers?bloggerNum=\").concat(topNum)).then(function(response){return setTopBloggers(response.data.result);});},[]);console.log(topBloggers);var topic=blogger.alias===user.alias?user.Topic:blogger.Topic;var allTopicElements=blogger._id&&topic.map(function(topic,index){return/*#__PURE__*/_jsx(Topic,{index:index,id:topic._id,userID:topic.userID,topicName:topic.topicName,slug:topic.slug,blogs:topic.Blog,alias:blogger.alias},index);});var isLoggedIn=user&&blogger.alias===user.alias;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Helmet,{title:\"Trang ch\\u1EE7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home__top-bloggers\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home__top-bloggers__title\",children:[/*#__PURE__*/_jsx(\"img\",{src:wreath,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bloggers of the month\"}),/*#__PURE__*/_jsx(\"img\",{id:\"image2\",src:wreath,alt:\"\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"home__top-bloggers__bloggers\",children:topBloggers.map(function(blogger){return/*#__PURE__*/_jsx(Link,{to:\"/\".concat(blogger.alias,\"/\"),children:/*#__PURE__*/_jsx(BloggerCard,{blogger:blogger})});})})]}),isLoggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"home__new-blog\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\".concat(user.alias,\"/newBlog\"),className:\"home__link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home__new-blog__pfp\",children:blogger.profilepic!==''&&blogger.profilepic!==undefined?/*#__PURE__*/_jsx(\"img\",{src:'data:image/jpg;base64,'+blogger.profilepic,alt:alt}):/*#__PURE__*/_jsx(\"img\",{src:alt,alt:alt})}),/*#__PURE__*/_jsx(\"div\",{className:\"home__new-blog__placeholder\",children:'Tạo nguồn cảm hứng mới <3'})]})}):'',/*#__PURE__*/_jsx(\"div\",{className:\"home__topics\",children:allTopicElements})]})})});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","Helmet","Topic","useSelector","Link","alt","wreath","axios","serverUrl","BloggerCard","Home","user","state","blogger","topNum","topBloggers","setTopBloggers","then","response","data","result","console","log","topic","alias","allTopicElements","_id","map","index","userID","topicName","slug","Blog","isLoggedIn","profilepic","undefined"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/pages/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Helmet from '../components/Helmet';\r\nimport Topic from '../components/Topic';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport alt from '../assets/image/user/alt.png';\r\nimport wreath from '../assets/image/laurel-wreath.png';\r\nimport axios from 'axios';\r\nimport serverUrl from '../features/common/common';\r\nimport BloggerCard from '../components/BloggerCard';\r\n\r\nfunction Home() {\r\n    // const allTopics = useSelector((state) => state.topic);\r\n    // const user = JSON.parse(localStorage.getItem('user'))?.account;\r\n\r\n    const user = useSelector((state) => state.user);\r\n    const blogger = useSelector((state) => state.blogger);\r\n\r\n    const topNum = 5;\r\n    const [topBloggers, setTopBloggers] = useState([]);\r\n    useEffect(() => {\r\n        // const fetchData = async () => {\r\n        //     const result = (\r\n        //         await\r\n        //     ).data.result;\r\n        //     console.log(result);\r\n        //     setTopBloggers(topBloggers);\r\n        //     console.log(topBloggers);\r\n        // };\r\n        // fetchData();\r\n        axios(\r\n            `${serverUrl}api/user/get-top-bloggers?bloggerNum=${topNum}`\r\n        ).then((response) => setTopBloggers(response.data.result));\r\n    }, []);\r\n\r\n    console.log(topBloggers);\r\n\r\n    const topic = blogger.alias === user.alias ? user.Topic : blogger.Topic;\r\n\r\n    const allTopicElements =\r\n        blogger._id &&\r\n        topic.map((topic, index) => {\r\n            return (\r\n                <Topic\r\n                    key={index}\r\n                    index={index}\r\n                    id={topic._id}\r\n                    userID={topic.userID}\r\n                    topicName={topic.topicName}\r\n                    slug={topic.slug}\r\n                    blogs={topic.Blog}\r\n                    alias={blogger.alias}\r\n                />\r\n            );\r\n        });\r\n\r\n    var isLoggedIn = user && blogger.alias === user.alias;\r\n    return (\r\n        <div>\r\n            <Helmet title=\"Trang chủ\">\r\n                {\r\n                    <div className=\"home\">\r\n                        <div className=\"home__top-bloggers\">\r\n                            <div className=\"home__top-bloggers__title\">\r\n                                <img src={wreath} alt=\"\" />\r\n                                <p>Bloggers of the month</p>\r\n                                <img id=\"image2\" src={wreath} alt='' />\r\n                            </div>\r\n                            <div className=\"home__top-bloggers__bloggers\">\r\n                                {topBloggers.map((blogger) => (\r\n                                    <Link to={`/${blogger.alias}/`}>\r\n                                        <BloggerCard blogger={blogger} />\r\n                                    </Link>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        {isLoggedIn ? (\r\n                            <div className=\"home__new-blog\">\r\n                                <Link\r\n                                    to={`/${user.alias}/newBlog`}\r\n                                    className=\"home__link\"\r\n                                >\r\n                                    <div className=\"home__new-blog__pfp\">\r\n                                        {blogger.profilepic !== '' &&\r\n                                        blogger.profilepic !== undefined ? (\r\n                                            <img\r\n                                                src={\r\n                                                    'data:image/jpg;base64,' +\r\n                                                    blogger.profilepic\r\n                                                }\r\n                                                alt={alt}\r\n                                            />\r\n                                        ) : (\r\n                                            <img src={alt} alt={alt} />\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"home__new-blog__placeholder\">\r\n                                        {'Tạo nguồn cảm hứng mới <3'}\r\n                                    </div>\r\n                                </Link>\r\n                            </div>\r\n                        ) : (\r\n                            ''\r\n                        )}\r\n                        <div className=\"home__topics\">{allTopicElements}</div>\r\n                    </div>\r\n                }\r\n            </Helmet>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}