{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\HTML\\\\blog\\\\BlogProject\\\\client\\\\src\\\\pages\\\\Blog.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getBlogBySlugAsync } from '../features/post/blogSlice';\nimport Helmet from '../components/Helmet';\nimport Banner from '../components/Banner';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PageNotFound from './PageNotFound';\nimport Comment from '../components/Comment';\nimport alt from '../assets/image/blog/alt.jpg';\nimport { createNewComment, getAllCommentsByBlogAsync } from '../features/comment/commentSlice';\nimport { useState } from 'react';\nimport Reply from '../components/Reply';\nimport { getBloggerByUserID } from '../features/user/bloggerSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Blog() {\n  _s();\n\n  const params = useParams();\n  const slug = params.slug;\n  const dispatch = useDispatch(); // const user = useSelector((state) => state.user);\n\n  const blogger = useSelector(state => state.blogger);\n  const user = useSelector(state => state.user);\n  const blogs = useSelector(state => state.blog);\n  const comments = useSelector(state => state.comment);\n  const blog = Array.isArray(blogs) ? blogs === null || blogs === void 0 ? void 0 : blogs.find(blog => blog.slug === slug) : blogs;\n\n  async function getBlog() {\n    await dispatch(getBlogBySlugAsync(slug));\n  }\n\n  useEffect(() => {\n    getBlog();\n    dispatch(getAllCommentsByBlogAsync(blog === null || blog === void 0 ? void 0 : blog._id));\n  }, [dispatch, slug, blog === null || blog === void 0 ? void 0 : blog._id]);\n  const commentUserID = [...new Set(comments.map(comment => comment.userID))];\n  const commentUser = [];\n  commentUserID.map(async userID => {\n    commentUser.push(await dispatch(getBloggerByUserID(userID)));\n  }); // console.log(comments);\n\n  if (typeof blog === 'object') // if (blog)\n    return /*#__PURE__*/_jsxDEV(Helmet, {\n      title: \"Blog\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog\",\n        children: [blog.coverImg !== undefined ? /*#__PURE__*/_jsxDEV(Banner, {\n          img: 'data:image/jpg;base64,' + blog.coverImg.toString('base64'),\n          alt: alt,\n          quote: blog.quote\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Banner, {\n          img: alt,\n          alt: alt,\n          quote: blog.quote\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog__timestamp\",\n          children: `${blog.location === undefined ? blog.location + ' - ' : ''}${blog.date === undefined ? '' : blog.date.slice(0, 10)}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__title\",\n            children: blog.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__body\",\n            children: blog.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__signature\",\n            children: blog.signature\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-section\",\n        children: [/*#__PURE__*/_jsxDEV(Reply, {\n          blogID: blog._id,\n          userID: user._id,\n          isHeadComment: true,\n          parentID: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), comments.map(comment => {\n          return /*#__PURE__*/_jsxDEV(Comment, {\n            comment: comment,\n            blogID: blog._id,\n            userID: user._id,\n            alias: blogger.alias,\n            head: true,\n            lastchild: false\n          }, comment._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n}\n\n_s(Blog, \"1IoECxw7m1HVEpLsuGx9tU9em7k=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Blog;\nexport default Blog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blog\");","map":{"version":3,"names":["React","useEffect","useParams","getBlogBySlugAsync","Helmet","Banner","useDispatch","useSelector","PageNotFound","Comment","alt","createNewComment","getAllCommentsByBlogAsync","useState","Reply","getBloggerByUserID","Blog","params","slug","dispatch","blogger","state","user","blogs","blog","comments","comment","Array","isArray","find","getBlog","_id","commentUserID","Set","map","userID","commentUser","push","coverImg","undefined","toString","quote","location","date","slice","title","content","signature","alias"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/pages/Blog.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getBlogBySlugAsync } from '../features/post/blogSlice';\r\nimport Helmet from '../components/Helmet';\r\nimport Banner from '../components/Banner';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PageNotFound from './PageNotFound';\r\nimport Comment from '../components/Comment';\r\nimport alt from '../assets/image/blog/alt.jpg';\r\nimport {\r\n    createNewComment,\r\n    getAllCommentsByBlogAsync,\r\n} from '../features/comment/commentSlice';\r\nimport { useState } from 'react';\r\nimport Reply from '../components/Reply';\r\nimport { getBloggerByUserID } from '../features/user/bloggerSlice';\r\n\r\nfunction Blog() {\r\n    const params = useParams();\r\n    const slug = params.slug;\r\n    const dispatch = useDispatch();\r\n    // const user = useSelector((state) => state.user);\r\n    const blogger = useSelector((state) => state.blogger);\r\n    const user = useSelector((state) => state.user);\r\n    const blogs = useSelector((state) => state.blog);\r\n    const comments = useSelector((state) => state.comment);\r\n    const blog = Array.isArray(blogs)\r\n        ? blogs?.find((blog) => blog.slug === slug)\r\n        : blogs;\r\n\r\n    async function getBlog() {\r\n        await dispatch(getBlogBySlugAsync(slug));\r\n    }\r\n\r\n    useEffect(() => {\r\n        getBlog();\r\n        dispatch(getAllCommentsByBlogAsync(blog?._id));\r\n    }, [dispatch, slug, blog?._id]);\r\n\r\n    const commentUserID = [\r\n        ...new Set(comments.map((comment) => comment.userID)),\r\n    ];\r\n\r\n    const commentUser = [];\r\n\r\n    commentUserID.map(async (userID) => {\r\n        commentUser.push(await dispatch(getBloggerByUserID(userID)));\r\n    });\r\n\r\n    // console.log(comments);\r\n\r\n    if (typeof blog === 'object')\r\n        // if (blog)\r\n        return (\r\n            <Helmet title=\"Blog\">\r\n                <div className=\"blog\">\r\n                    {blog.coverImg !== undefined ? (\r\n                        <Banner\r\n                            img={\r\n                                'data:image/jpg;base64,' +\r\n                                blog.coverImg.toString('base64')\r\n                            }\r\n                            alt={alt}\r\n                            quote={blog.quote}\r\n                        />\r\n                    ) : (\r\n                        <Banner img={alt} alt={alt} quote={blog.quote} />\r\n                    )}\r\n                    <div className=\"blog__timestamp\">{`${\r\n                        blog.location === undefined ? blog.location + ' - ' : ''\r\n                    }${\r\n                        blog.date === undefined ? '' : blog.date.slice(0, 10)\r\n                    }`}</div>\r\n                    <div className=\"blog__content\">\r\n                        <div className=\"blog__content__title\">{blog.title}</div>\r\n                        <div className=\"blog__content__body\">\r\n                            {blog.content}\r\n                        </div>\r\n                        <div className=\"blog__content__signature\">\r\n                            {blog.signature}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"comment-section\">\r\n                    <Reply\r\n                        blogID={blog._id}\r\n                        userID={user._id}\r\n                        isHeadComment={true}\r\n                        parentID=\"\"\r\n                    />\r\n                    {comments.map((comment) => {\r\n                        return (\r\n                            <Comment\r\n                                comment={comment}\r\n                                key={comment._id}\r\n                                blogID={blog._id}\r\n                                userID={user._id}\r\n                                alias={blogger.alias}\r\n                                head={true}\r\n                                lastchild={false}\r\n                            />\r\n                        );\r\n                    })}\r\n                </div>\r\n            </Helmet>\r\n        );\r\n}\r\n\r\nexport default Blog;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}