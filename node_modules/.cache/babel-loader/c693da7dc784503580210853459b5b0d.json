{"ast":null,"code":"import _slicedToArray from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import Reply from'./Reply';import alt from'../assets/image/user/alt.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var comment=_ref.comment,alias=_ref.alias,pfp=_ref.pfp,head=_ref.head,lastchild=_ref.lastchild,blogID=_ref.blogID,userID=_ref.userID,commentUser=_ref.commentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showReplies=_useState2[0],setShowReplies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),newReply=_useState4[0],setNewReply=_useState4[1];var user=commentUser.find(function(user){return user._id===comment.userID;});return/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comment__card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__left__pfp\",children:(user===null||user===void 0?void 0:user.profilepic)!==''&&(user===null||user===void 0?void 0:user.profilepic)!==undefined?/*#__PURE__*/_jsx(\"img\",{src:'data:image/jpg;base64,'+(user===null||user===void 0?void 0:user.profilepic),alt:alt}):/*#__PURE__*/_jsx(\"img\",{src:alt,alt:alt})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment__card__right \".concat(comment.children&&comment.children.length>0&&'border',\" \").concat(lastchild===true?'lastchild':'',\" \").concat(!showReplies?'hiding-replies':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__card__right__title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__title__alias\",children:user===null||user===void 0?void 0:user.alias}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__title__timestamp\",children:showingTimestamp(comment.createdAt)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__context\",children:comment.context}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__options\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__options__reply\",onClick:function onClick(){return setNewReply(!newReply);},children:\"reply\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__right__replies \".concat(showReplies?'show-replies':''),children:comment.children&&comment.children.map(function(child,index){return/*#__PURE__*/_jsx(Comment,{comment:child,alias:alias,head:false,blogID:blogID,userID:userID,commentUser:commentUser,lastchild:index===comment.children.length-1?true:false},child._id);})}),comment.childNum>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"comment__card__right__show-reply\",onClick:function onClick(){return setShowReplies(!showReplies);},children:[!showReplies?'show':'hide',' ',comment.children.length,' ',comment.children.length===1?'reply':'replies',/*#__PURE__*/_jsx(\"div\",{className:\"comment__card__left__connectline\"})]}),newReply&&/*#__PURE__*/_jsx(Reply,{blogID:blogID,userID:userID,parentID:comment._id,setShowReplies:setShowReplies,setNewReply:setNewReply,head:false})]})]})});};var showingTimestamp=function showingTimestamp(timestamp){var date=new Date(timestamp);var now=new Date();if(date.getFullYear()===now.getFullYear())if(date.getMonth()===now.getMonth()){if(date.getDate()===now.getDate()){if(date.getHours()===now.getHours()){if(date.getMinutes()===now.getMinutes()){return Math.floor(Math.abs(now-date)/1000)+'sec';}return Math.floor(Math.abs(now-date)/1000/60)+'m';}return Math.floor(Math.abs(now-date)/1000/60/24)+'h';}return Math.floor(Math.abs(now-date)/1000/60/60/24)+'d';}};export default Comment;","map":{"version":3,"names":["React","useState","Reply","alt","Comment","comment","alias","pfp","head","lastchild","blogID","userID","commentUser","showReplies","setShowReplies","newReply","setNewReply","user","find","_id","profilepic","undefined","children","length","showingTimestamp","createdAt","context","map","child","index","childNum","timestamp","date","Date","now","getFullYear","getMonth","getDate","getHours","getMinutes","Math","floor","abs"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/components/Comment.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useState } from 'react';\r\nimport Reply from './Reply';\r\nimport alt from '../assets/image/user/alt.png';\r\n\r\nconst Comment = ({\r\n    comment,\r\n    alias,\r\n    pfp,\r\n    head,\r\n    lastchild,\r\n    blogID,\r\n    userID,\r\n    commentUser,\r\n}) => {\r\n    const [showReplies, setShowReplies] = useState(false);\r\n    const [newReply, setNewReply] = useState(false);\r\n\r\n    const user = commentUser.find((user) => user._id === comment.userID);\r\n\r\n    return (\r\n        <div className=\"comment\">\r\n            <div className={`comment__card`}>\r\n                <div className=\"comment__card__left\">\r\n                    <div className=\"comment__card__left__pfp\">\r\n                        {user?.profilepic !== '' &&\r\n                        user?.profilepic !== undefined ? (\r\n                            <img\r\n                                src={\r\n                                    'data:image/jpg;base64,' +\r\n                                    user?.profilepic\r\n                                }\r\n                                alt={alt}\r\n                            />\r\n                        ) : (\r\n                            <img src={alt} alt={alt} />\r\n                        )}\r\n                    </div>\r\n                    {/* {!head && (\r\n                        <div className=\"comment__card__left__connectline\"></div>\r\n                    )} */}\r\n                </div>\r\n                <div\r\n                    className={`comment__card__right ${\r\n                        comment.children &&\r\n                        comment.children.length > 0 &&\r\n                        'border'\r\n                    } ${lastchild === true ? 'lastchild' : ''} ${\r\n                        !showReplies ? 'hiding-replies' : ''\r\n                    }`}\r\n                >\r\n                    <div className=\"comment__card__right__title\">\r\n                        <div className=\"comment__card__right__title__alias\">\r\n                            {user?.alias}\r\n                        </div>\r\n                        <div className=\"comment__card__right__title__timestamp\">\r\n                            {/* {comment.createdAt.slice(0, 16)} */}\r\n                            {showingTimestamp(comment.createdAt)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"comment__card__right__context\">\r\n                        {comment.context}\r\n                    </div>\r\n                    <div className=\"comment__card__right__options\">\r\n                        <div\r\n                            className=\"comment__card__right__options__reply\"\r\n                            onClick={() => setNewReply(!newReply)}\r\n                        >\r\n                            reply\r\n                        </div>\r\n                    </div>\r\n                    {/* : ( */}\r\n                    <div\r\n                        className={`comment__card__right__replies ${\r\n                            showReplies ? 'show-replies' : ''\r\n                        }`}\r\n                    >\r\n                        {comment.children &&\r\n                            comment.children.map((child, index) => {\r\n                                return (\r\n                                    <Comment\r\n                                        comment={child}\r\n                                        key={child._id}\r\n                                        alias={alias}\r\n                                        head={false}\r\n                                        blogID={blogID}\r\n                                        userID={userID}\r\n                                        commentUser={commentUser}\r\n                                        lastchild={\r\n                                            index ===\r\n                                            comment.children.length - 1\r\n                                                ? true\r\n                                                : false\r\n                                        }\r\n                                    />\r\n                                );\r\n                            })}\r\n                    </div>\r\n                    {comment.childNum > 0 && (\r\n                        <div\r\n                            className=\"comment__card__right__show-reply\"\r\n                            onClick={() => setShowReplies(!showReplies)}\r\n                        >\r\n                            {!showReplies ? 'show' : 'hide'}{' '}\r\n                            {comment.children.length}{' '}\r\n                            {comment.children.length === 1\r\n                                ? 'reply'\r\n                                : 'replies'}\r\n                            <div className=\"comment__card__left__connectline\"></div>\r\n                        </div>\r\n                    )}\r\n                    {/* ) */}\r\n                    {/* } */}\r\n                    {newReply && (\r\n                        <Reply\r\n                            blogID={blogID}\r\n                            userID={userID}\r\n                            parentID={comment._id}\r\n                            setShowReplies={setShowReplies}\r\n                            setNewReply={setNewReply}\r\n                            head={false}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst showingTimestamp = (timestamp) => {\r\n    var date = new Date(timestamp);\r\n    var now = new Date();\r\n    if (date.getFullYear() === now.getFullYear())\r\n        if (date.getMonth() === now.getMonth()) {\r\n            if (date.getDate() === now.getDate()) {\r\n                if (date.getHours() === now.getHours()) {\r\n                    if (date.getMinutes() === now.getMinutes()) {\r\n                        return Math.floor(Math.abs(now - date) / 1000) + 'sec';\r\n                    }\r\n                    return Math.floor(Math.abs(now - date) / 1000 / 60) + 'm';\r\n                }\r\n                return Math.floor(Math.abs(now - date) / 1000 / 60 / 24) + 'h';\r\n            }\r\n            return Math.floor(Math.abs(now - date) / 1000 / 60 / 60 / 24) + 'd';\r\n        }\r\n};\r\n\r\nexport default Comment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}