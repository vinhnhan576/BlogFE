{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\HTML\\\\blog\\\\BlogProject\\\\client\\\\src\\\\pages\\\\Blog.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getBlogBySlugAsync } from '../features/post/blogSlice';\nimport Helmet from '../components/Helmet';\nimport Banner from '../components/Banner';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PageNotFound from './PageNotFound';\nimport Comment from '../components/Comment';\nimport alt from '../assets/image/blog/alt.jpg';\nimport { createNewComment, getAllCommentsByBlogAsync } from '../features/comment/commentSlice';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Blog() {\n  _s();\n\n  const params = useParams();\n  const slug = params.slug;\n  const dispatch = useDispatch(); // const user = useSelector((state) => state.user);\n\n  const blogger = useSelector(state => state.blogger);\n  const blogs = useSelector(state => state.blog);\n  const comments = useSelector(state => state.comment);\n  const blog = Array.isArray(blogs) ? blogs === null || blogs === void 0 ? void 0 : blogs.find(blog => blog.slug === slug) : blogs;\n\n  async function getBlog() {\n    await dispatch(getBlogBySlugAsync(slug));\n  }\n\n  const [context, setContext] = useState('');\n\n  const makeNewComment = async () => {\n    await dispatch(createNewComment({\n      context: context\n    }));\n  };\n\n  useEffect(() => {\n    getBlog();\n    dispatch(getAllCommentsByBlogAsync(blog === null || blog === void 0 ? void 0 : blog._id));\n  }, [dispatch, slug, blog === null || blog === void 0 ? void 0 : blog._id]);\n  console.log(comments);\n  if (typeof blog === 'object') // if (blog)\n    return /*#__PURE__*/_jsxDEV(Helmet, {\n      title: \"Blog\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog\",\n        children: [blog.coverImg !== undefined ? /*#__PURE__*/_jsxDEV(Banner, {\n          img: 'data:image/jpg;base64,' + blog.coverImg.toString('base64'),\n          alt: alt,\n          quote: blog.quote\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Banner, {\n          img: alt,\n          alt: alt,\n          quote: blog.quote\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog__timestamp\",\n          children: `${blog.location === undefined ? blog.location + ' - ' : ''}${blog.date === undefined ? '' : blog.date.slice(0, 10)}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__title\",\n            children: blog.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__body\",\n            children: blog.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"blog__content__signature\",\n            children: blog.signature\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-comment\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => setContext(e.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post\",\n            onClick: makeNewComment,\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), comments.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n          comment: comment,\n          alias: blogger.alias,\n          head: true,\n          lastchild: false\n        }, comment._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this);\n}\n\n_s(Blog, \"WdpqE2DsSVeGrvPPfI5G8r9d4zA=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Blog;\nexport default Blog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blog\");","map":{"version":3,"names":["React","useEffect","useParams","getBlogBySlugAsync","Helmet","Banner","useDispatch","useSelector","PageNotFound","Comment","alt","createNewComment","getAllCommentsByBlogAsync","useState","Blog","params","slug","dispatch","blogger","state","blogs","blog","comments","comment","Array","isArray","find","getBlog","context","setContext","makeNewComment","_id","console","log","coverImg","undefined","toString","quote","location","date","slice","title","content","signature","e","value","map","alias"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/pages/Blog.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getBlogBySlugAsync } from '../features/post/blogSlice';\r\nimport Helmet from '../components/Helmet';\r\nimport Banner from '../components/Banner';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PageNotFound from './PageNotFound';\r\nimport Comment from '../components/Comment';\r\nimport alt from '../assets/image/blog/alt.jpg';\r\nimport { createNewComment, getAllCommentsByBlogAsync } from '../features/comment/commentSlice';\r\nimport { useState } from 'react';\r\n\r\nfunction Blog() {\r\n    const params = useParams();\r\n    const slug = params.slug;\r\n    const dispatch = useDispatch();\r\n    // const user = useSelector((state) => state.user);\r\n    const blogger = useSelector((state) => state.blogger);\r\n    const blogs = useSelector((state) => state.blog);\r\n    const comments = useSelector((state) => state.comment);\r\n    const blog = Array.isArray(blogs)\r\n        ? blogs?.find((blog) => blog.slug === slug)\r\n        : blogs;\r\n\r\n    async function getBlog() {\r\n        await dispatch(getBlogBySlugAsync(slug));\r\n    }\r\n\r\n    const [context,setContext] = useState('')\r\n\r\n    const makeNewComment = async () => {await dispatch(createNewComment({context: context, }))};\r\n\r\n    useEffect(() => {\r\n        getBlog();\r\n        dispatch(getAllCommentsByBlogAsync(blog?._id));\r\n    }, [dispatch, slug, blog?._id]);\r\n\r\n    console.log(comments);\r\n\r\n    if (typeof blog === 'object')\r\n        // if (blog)\r\n        return (\r\n            <Helmet title=\"Blog\">\r\n                <div className=\"blog\">\r\n                    {blog.coverImg !== undefined ? (\r\n                        <Banner\r\n                            img={\r\n                                'data:image/jpg;base64,' +\r\n                                blog.coverImg.toString('base64')\r\n                            }\r\n                            alt={alt}\r\n                            quote={blog.quote}\r\n                        />\r\n                    ) : (\r\n                        <Banner img={alt} alt={alt} quote={blog.quote} />\r\n                    )}\r\n                    <div className=\"blog__timestamp\">{`${\r\n                        blog.location === undefined ? blog.location + ' - ' : ''\r\n                    }${\r\n                        blog.date === undefined ? '' : blog.date.slice(0, 10)\r\n                    }`}</div>\r\n                    <div className=\"blog__content\">\r\n                        <div className=\"blog__content__title\">{blog.title}</div>\r\n                        <div className=\"blog__content__body\">\r\n                            {blog.content}\r\n                        </div>\r\n                        <div className=\"blog__content__signature\">\r\n                            {blog.signature}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"comment-section\">\r\n                    <div className=\"add-comment\">\r\n                        <input type=\"text\" onChange={(e)=>setContext(e.value)} />\r\n                        <div className=\"post\" onClick={makeNewComment}>\r\n                            Comment\r\n                        </div>\r\n                    </div>\r\n                    {comments.map((comment) => (\r\n                        <Comment\r\n                            comment={comment}\r\n                            key={comment._id}\r\n                            alias={blogger.alias}\r\n                            head={true}\r\n                            lastchild={false}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </Helmet>\r\n        );\r\n}\r\n\r\nexport default Blog;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}