{"ast":null,"code":"import _defineProperty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import Axios from\"axios\";export var authenticateUserAsync=createAsyncThunk(\"auth/authenticateUserAsync\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var response,tasks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log();_context.next=3;return Axios.post(\"https://blogprojectpbl3.herokuapp.com/auth\",user);case 3:response=_context.sent;tasks=response.data;return _context.abrupt(\"return\",{tasks:tasks});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var createNewAccountAsync=createAsyncThunk(\"api/user/createNewAccountAsync\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var account,response,tasks;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=_ref2.account;console.log(account);_context2.next=4;return Axios.post(\"https://blogprojectpbl3.herokuapp.com/api/account\",account);case 4:response=_context2.sent;tasks=response.data;return _context2.abrupt(\"return\",{tasks:tasks});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());export var accountSlice=createSlice({name:\"account\",initialState:{account:null},reducers:{// login: (state, action) => {\n// \tconst data = {\n// \t\tusername: action.payload.username,\n// \t\tpassword: action.payload.password,\n// \t};\n// \tAxios.post(\"http://localhost:5000/auth\", { data })\n// \t\t.then((res) => {\n// \t\t\tif (res) {\n// \t\t\t\tstate.account = action.payload;\n// \t\t\t\tconsole.log(state.account);\n// \t\t\t} else state.account = null;\n// \t\t})\n// \t\t.catch((error) => {\n// \t\t\tconsole.log(error);\n// \t\t});\n// },\nlogout:function logout(state){state.account=null;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,authenticateUserAsync.fulfilled,function(state,action){console.log(\"authenticate user successfully\");if(action.payload.tasks)state.account=action.payload.tasks;else state.account=null;console.log(state.account);}),_defineProperty(_extraReducers,createNewAccountAsync.fulfilled,function(state,action){console.log(\"added new account successfully\");return action.payload.tasks;}),_extraReducers)});var logout=accountSlice.actions.logout;export{logout};export var selectAccount=function selectAccount(state){return state.account.account;};export default accountSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Axios","authenticateUserAsync","user","console","log","post","response","tasks","data","createNewAccountAsync","account","accountSlice","name","initialState","reducers","logout","state","extraReducers","fulfilled","action","payload","actions","selectAccount","reducer"],"sources":["D:/Code/HTML/BlogProject/client/src/features/account/accountSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport Axios from \"axios\";\r\n\r\nexport const authenticateUserAsync = createAsyncThunk(\r\n\t\"auth/authenticateUserAsync\",\r\n\tasync (user) => {\r\n\t\tconsole.log();\r\n\t\tconst response = await Axios.post(\r\n\t\t\t\"https://blogprojectpbl3.herokuapp.com/auth\",\r\n\t\t\tuser\r\n\t\t);\r\n\t\tconst tasks = response.data;\r\n\t\treturn { tasks };\r\n\t}\r\n);\r\n\r\nexport const createNewAccountAsync = createAsyncThunk(\r\n\t\"api/user/createNewAccountAsync\",\r\n\tasync ({account}) => {\r\n\t\tconsole.log(account)\r\n\t\tconst response = await Axios.post(\r\n\t\t\t\"https://blogprojectpbl3.herokuapp.com/api/account\",\r\n\t\t\taccount\r\n\t\t);\r\n\t\tconst tasks = response.data;\r\n\t\treturn { tasks };\r\n\t}\r\n);\r\n\r\nexport const accountSlice = createSlice({\r\n\tname: \"account\",\r\n\tinitialState: {\r\n\t\taccount: null,\r\n\t},\r\n\treducers: {\r\n\t\t// login: (state, action) => {\r\n\t\t// \tconst data = {\r\n\t\t// \t\tusername: action.payload.username,\r\n\t\t// \t\tpassword: action.payload.password,\r\n\t\t// \t};\r\n\t\t// \tAxios.post(\"http://localhost:5000/auth\", { data })\r\n\t\t// \t\t.then((res) => {\r\n\t\t// \t\t\tif (res) {\r\n\t\t// \t\t\t\tstate.account = action.payload;\r\n\t\t// \t\t\t\tconsole.log(state.account);\r\n\t\t// \t\t\t} else state.account = null;\r\n\t\t// \t\t})\r\n\t\t// \t\t.catch((error) => {\r\n\t\t// \t\t\tconsole.log(error);\r\n\t\t// \t\t});\r\n\t\t// },\r\n\t\tlogout: (state) => {\r\n\t\t\tstate.account = null;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[authenticateUserAsync.fulfilled]: (state, action) => {\r\n\t\t\tconsole.log(\"authenticate user successfully\");\r\n\t\t\tif (action.payload.tasks) state.account = action.payload.tasks;\r\n\t\t\telse state.account = null;\r\n\t\t\tconsole.log(state.account);\r\n\t\t},\r\n\t\t[createNewAccountAsync.fulfilled]: (state, action) => {\r\n\t\t\tconsole.log(\"added new account successfully\");\r\n\t\t\treturn action.payload.tasks;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { logout } = accountSlice.actions;\r\n\r\nexport const selectAccount = (state) => state.account.account;\r\n\r\nexport default accountSlice.reducer;\r\n"],"mappings":"oYAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,sBAAqB,CAAGF,gBAAgB,CACpD,4BADoD,4FAEpD,iBAAOG,IAAP,uIACCC,OAAO,CAACC,GAAR,GADD,sBAEwBJ,MAAK,CAACK,IAAN,CACtB,4CADsB,CAEtBH,IAFsB,CAFxB,QAEOI,QAFP,eAMOC,KANP,CAMeD,QAAQ,CAACE,IANxB,iCAOQ,CAAED,KAAK,CAALA,KAAF,CAPR,wDAFoD,+DAA9C,CAaP,MAAO,IAAME,sBAAqB,CAAGV,gBAAgB,CACpD,gCADoD,6FAEpD,0KAAQW,OAAR,OAAQA,OAAR,CACCP,OAAO,CAACC,GAAR,CAAYM,OAAZ,EADD,uBAEwBV,MAAK,CAACK,IAAN,CACtB,mDADsB,CAEtBK,OAFsB,CAFxB,QAEOJ,QAFP,gBAMOC,KANP,CAMeD,QAAQ,CAACE,IANxB,kCAOQ,CAAED,KAAK,CAALA,KAAF,CAPR,0DAFoD,iEAA9C,CAaP,MAAO,IAAMI,aAAY,CAAGb,WAAW,CAAC,CACvCc,IAAI,CAAE,SADiC,CAEvCC,YAAY,CAAE,CACbH,OAAO,CAAE,IADI,CAFyB,CAKvCI,QAAQ,CAAE,CACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAM,CAAE,gBAACC,KAAD,CAAW,CAClBA,KAAK,CAACN,OAAN,CAAgB,IAAhB,CACA,CAnBQ,CAL6B,CA0BvCO,aAAa,mDACXhB,qBAAqB,CAACiB,SADX,CACuB,SAACF,KAAD,CAAQG,MAAR,CAAmB,CACrDhB,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACA,GAAIe,MAAM,CAACC,OAAP,CAAeb,KAAnB,CAA0BS,KAAK,CAACN,OAAN,CAAgBS,MAAM,CAACC,OAAP,CAAeb,KAA/B,CAA1B,IACKS,MAAK,CAACN,OAAN,CAAgB,IAAhB,CACLP,OAAO,CAACC,GAAR,CAAYY,KAAK,CAACN,OAAlB,EACA,CANW,iCAOXD,qBAAqB,CAACS,SAPX,CAOuB,SAACF,KAAD,CAAQG,MAAR,CAAmB,CACrDhB,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACA,MAAOe,OAAM,CAACC,OAAP,CAAeb,KAAtB,CACA,CAVW,iBA1B0B,CAAD,CAAhC,CAwCA,GAAQQ,OAAR,CAAmBJ,YAAY,CAACU,OAAhC,CAAQN,MAAR,C,eAEP,MAAO,IAAMO,cAAa,CAAG,QAAhBA,cAAgB,CAACN,KAAD,QAAWA,MAAK,CAACN,OAAN,CAAcA,OAAzB,EAAtB,CAEP,cAAeC,aAAY,CAACY,OAA5B"},"metadata":{},"sourceType":"module"}