{"ast":null,"code":"import _slicedToArray from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef}from'react';import{useState}from'react';import{Link,useParams}from'react-router-dom';import MessageBox from'./MessageBox';import{deleteBlogAsync}from'../features/post/blogSlice';import{useDispatch,useSelector}from'react-redux';import alt from'../assets/image/blog/alt.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CategoryCard=function CategoryCard(props){var dispatch=useDispatch();var params=useParams();var bodyImageRef=useRef();var onImgLoad=function onImgLoad(_ref){var img=_ref.target;var offsetHeight=img.offsetHeight,offsetWidth=img.offsetWidth;if(offsetWidth>offsetHeight)bodyImageRef.current.classList.add('landscape');else bodyImageRef.current.classList.add('portrait');};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openMessageBox=_useState2[0],setOpenMessageBox=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),messageBoxType=_useState4[0],setMessageBoxType=_useState4[1];var publish=useRef();var store=useRef();var onCheckButtonClick=function onCheckButtonClick(){setOpenMessageBox(false);dispatch(deleteBlogAsync(props.id));};var onCloseButtonClick=function onCloseButtonClick(){setOpenMessageBox(false);};var user=useSelector(function(state){return state.user;});var blogger=useSelector(function(state){return state.blogger;});var isUser=user.alias===blogger.alias;return/*#__PURE__*/_jsxs(\"div\",{className:\"category_container\",id:props.id,children:[/*#__PURE__*/_jsxs(Link,{to:\"/\".concat(params.alias,\"/blog/\").concat(props.slug),children:[/*#__PURE__*/_jsx(\"div\",{className:\"category_container-image\",ref:bodyImageRef,children:props.img!==undefined?/*#__PURE__*/_jsx(\"img\",{onLoad:onImgLoad,src:'data:image/jpg;base64,'+props.img.toString('base64'),alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{onLoad:onImgLoad,src:alt,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"category_container-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:props.date}),/*#__PURE__*/_jsx(\"h1\",{children:props.title}),/*#__PURE__*/_jsx(\"p\",{children:props.content})]})]}),isUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"category_container-functions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category_container-functions-left\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-paper-plane \".concat(props.published?'hidden':''),ref:publish,onClick:function onClick(){setOpenMessageBox(!openMessageBox);setMessageBoxType('Xuất bản');// store.current.classList.toggle('hidden');\n}}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-box \".concat(props.published?'':'hidden'),ref:store,onClick:function onClick(){setOpenMessageBox(!openMessageBox);setMessageBoxType('Lưu trữ');// publish.current.classList.toggle('hidden');\n}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"category_container-functions-right\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-edit-alt\",onClick:function onClick(){setOpenMessageBox(!openMessageBox);setMessageBoxType('Chỉnh sửa');}}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-trash\",onClick:function onClick(){setOpenMessageBox(!openMessageBox);setMessageBoxType('Xóa');}})]})]}),openMessageBox&&/*#__PURE__*/_jsx(MessageBox,{_id:props.id,alias:params.alias,slug:props.slug,title:\"\".concat(messageBoxType,\" blog\"),body:\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n \".concat(messageBoxType.toLowerCase(),\" \"),blogName:props.title,onCloseButtonClick:onCloseButtonClick,onCheckButtonClick:onCheckButtonClick,functionType:messageBoxType})]});};export default CategoryCard;","map":{"version":3,"names":["React","useRef","useState","Link","useParams","MessageBox","deleteBlogAsync","useDispatch","useSelector","alt","CategoryCard","props","dispatch","params","bodyImageRef","onImgLoad","img","target","offsetHeight","offsetWidth","current","classList","add","openMessageBox","setOpenMessageBox","messageBoxType","setMessageBoxType","publish","store","onCheckButtonClick","id","onCloseButtonClick","user","state","blogger","isUser","alias","slug","undefined","toString","date","title","content","published","toLowerCase"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/components/CategoryCard.jsx"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport { useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport MessageBox from './MessageBox';\r\nimport { deleteBlogAsync } from '../features/post/blogSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport alt from '../assets/image/blog/alt.jpg';\r\n\r\nconst CategoryCard = (props) => {\r\n    const dispatch = useDispatch();\r\n    const params = useParams();\r\n    const bodyImageRef = useRef();\r\n    const onImgLoad = ({ target: img }) => {\r\n        const { offsetHeight, offsetWidth } = img;\r\n        if (offsetWidth > offsetHeight)\r\n            bodyImageRef.current.classList.add('landscape');\r\n        else bodyImageRef.current.classList.add('portrait');\r\n    };\r\n\r\n    const [openMessageBox, setOpenMessageBox] = useState(false);\r\n\r\n    const [messageBoxType, setMessageBoxType] = useState();\r\n\r\n    const publish = useRef();\r\n    const store = useRef();\r\n\r\n    const onCheckButtonClick = () => {\r\n        setOpenMessageBox(false);\r\n        dispatch(deleteBlogAsync(props.id));\r\n    };\r\n\r\n    const onCloseButtonClick = () => {\r\n        setOpenMessageBox(false);\r\n    };\r\n\r\n    const user = useSelector((state) => state.user);\r\n    const blogger = useSelector((state) => state.blogger);\r\n    const isUser = user.alias === blogger.alias;\r\n\r\n    return (\r\n        <div className=\"category_container\" id={props.id}>\r\n            <Link to={`/${params.alias}/blog/${props.slug}`}>\r\n                <div className=\"category_container-image\" ref={bodyImageRef}>\r\n                    {props.img !== undefined ? (\r\n                        <img\r\n                            onLoad={onImgLoad}\r\n                            src={\r\n                                'data:image/jpg;base64,' +\r\n                                props.img.toString('base64')\r\n                            }\r\n                            alt=\"\"\r\n                        />\r\n                    ) : (\r\n                        <img onLoad={onImgLoad} src={alt} alt=\"\" />\r\n                    )}\r\n                </div>\r\n                <div className=\"category_container-content\">\r\n                    <h3>{props.date}</h3>\r\n                    <h1>{props.title}</h1>\r\n                    <p>{props.content}</p>\r\n                </div>\r\n            </Link>\r\n            {isUser && (\r\n                <div className=\"category_container-functions\">\r\n                    <div className=\"category_container-functions-left\">\r\n                        <i\r\n                            className={`bx bx-paper-plane ${\r\n                                props.published ? 'hidden' : ''\r\n                            }`}\r\n                            ref={publish}\r\n                            onClick={() => {\r\n                                setOpenMessageBox(!openMessageBox);\r\n                                setMessageBoxType('Xuất bản');\r\n                                // store.current.classList.toggle('hidden');\r\n                            }}\r\n                        ></i>\r\n                        <i\r\n                            className={`bx bxs-box ${\r\n                                props.published ? '' : 'hidden'\r\n                            }`}\r\n                            ref={store}\r\n                            onClick={() => {\r\n                                setOpenMessageBox(!openMessageBox);\r\n                                setMessageBoxType('Lưu trữ');\r\n                                // publish.current.classList.toggle('hidden');\r\n                            }}\r\n                        ></i>\r\n                    </div>\r\n\r\n                    <div className=\"category_container-functions-right\">\r\n                        <i\r\n                            className=\"bx bxs-edit-alt\"\r\n                            onClick={() => {\r\n                                setOpenMessageBox(!openMessageBox);\r\n                                setMessageBoxType('Chỉnh sửa');\r\n                            }}\r\n                        ></i>\r\n                        <i\r\n                            className=\"bx bxs-trash\"\r\n                            onClick={() => {\r\n                                setOpenMessageBox(!openMessageBox);\r\n                                setMessageBoxType('Xóa');\r\n                            }}\r\n                        ></i>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {openMessageBox && (\r\n                <MessageBox\r\n                    _id={props.id}\r\n                    alias={params.alias}\r\n                    slug={props.slug}\r\n                    title={`${messageBoxType} blog`}\r\n                    body={`Bạn có chắc chắn muốn ${messageBoxType.toLowerCase()} `}\r\n                    blogName={props.title}\r\n                    onCloseButtonClick={onCloseButtonClick}\r\n                    onCheckButtonClick={onCheckButtonClick}\r\n                    functionType={messageBoxType}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoryCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}