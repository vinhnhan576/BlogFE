{"ast":null,"code":"import _regeneratorRuntime from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{authenticateUserAsync}from\"../features/account/accountSlice\";import{getUserByUsernameAsync}from\"../features/user/userSlice\";import{selectUser}from\"../features/user/userSlice\";import{Link,useNavigate}from\"react-router-dom\";import loginImage01 from\"../assets/image/login/login-image-01.png\";import logo from\"../assets/image/login/login-logo.png\";import{unwrapResult}from\"@reduxjs/toolkit\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var dispatch=useDispatch();var navigate=useNavigate();var user=useSelector(selectUser);var initialUserState={username:\"\",password:\"\"};var _useState=useState(initialUserState),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var handleChange=function handleChange(input){return function(event){setAccount(_objectSpread(_objectSpread({},account),{},_defineProperty({},input,event.target.value)));};};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var result,originalPromiseResult;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"form submitted\");dispatch(authenticateUserAsync({username:account.username,password:account.password}));_context.next=5;return dispatch(getUserByUsernameAsync({username:account.username}));case 5:result=_context.sent;originalPromiseResult=unwrapResult(result);if(originalPromiseResult.tasks.alias!==undefined)navigate(\"/\".concat(originalPromiseResult.tasks.alias,\"/\"));case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__image\",children:/*#__PURE__*/_jsx(\"img\",{src:loginImage01,alt:\"\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__logo\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__form__item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__form__item__title\",children:\"t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",id:\"username\",onChange:handleChange(\"username\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__form__item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__form__item__title\",children:\"m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",onChange:handleChange(\"password\")})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__form__button\",children:\"\\u0111\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(Link,{to:\"signup\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__form__button\",children:\"\\u0111\\u0103ng k\\xFD\"})})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","authenticateUserAsync","getUserByUsernameAsync","selectUser","Link","useNavigate","loginImage01","logo","unwrapResult","Login","dispatch","navigate","user","initialUserState","username","password","account","setAccount","handleChange","input","event","target","value","handleLogin","e","preventDefault","console","log","result","originalPromiseResult","tasks","alias","undefined"],"sources":["D:/Code/HTML/BlogProject/client/src/pages/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { authenticateUserAsync } from \"../features/account/accountSlice\";\r\nimport { getUserByUsernameAsync } from \"../features/user/userSlice\";\r\nimport { selectUser } from \"../features/user/userSlice\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport loginImage01 from \"../assets/image/login/login-image-01.png\";\r\nimport logo from \"../assets/image/login/login-logo.png\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\n\r\nconst Login = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\tconst user = useSelector(selectUser);\r\n\r\n\tconst initialUserState = {\r\n\t\tusername: \"\",\r\n\t\tpassword: \"\",\r\n\t};\r\n\r\n\tconst [account, setAccount] = useState(initialUserState);\r\n\r\n\tconst handleChange = (input) => (event) => {\r\n\t\tsetAccount({ ...account, [input]: event.target.value });\r\n\t};\r\n\r\n\tconst handleLogin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconsole.log(\"form submitted\");\r\n\t\tdispatch(\r\n\t\t\tauthenticateUserAsync({\r\n\t\t\t\tusername: account.username,\r\n\t\t\t\tpassword: account.password,\r\n\t\t\t})\r\n\t\t);\r\n\t\tconst result = await dispatch(\r\n\t\t\tgetUserByUsernameAsync({\r\n\t\t\t\tusername: account.username,\r\n\t\t\t})\r\n\t\t);\r\n\t\tconst originalPromiseResult = unwrapResult(result);\r\n\t\tif (originalPromiseResult.tasks.alias !== undefined)\r\n\t\t\tnavigate(`/${originalPromiseResult.tasks.alias}/`);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login\">\r\n\t\t\t<div className=\"login__image\">\r\n\t\t\t\t<img src={loginImage01} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<form className=\"login__form\" onSubmit={handleLogin}>\r\n\t\t\t\t<div className=\"login__logo\">\r\n\t\t\t\t\t<img src={logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"login__form__item\">\r\n\t\t\t\t\t<div className=\"login__form__item__title\">tài khoản</div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\tonChange={handleChange(\"username\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"login__form__item\">\r\n\t\t\t\t\t<div className=\"login__form__item__title\">mật khẩu</div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\tonChange={handleChange(\"password\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type=\"submit\" className=\"login__form__button\">\r\n\t\t\t\t\tđăng nhập\r\n\t\t\t\t</button>\r\n\t\t\t\t<Link to=\"signup\">\r\n\t\t\t\t\t<button type=\"submit\" className=\"login__form__button\">\r\n\t\t\t\t\t\tđăng ký\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}