{"ast":null,"code":"import _objectDestructuringEmpty from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _defineProperty from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk,nanoid}from'@reduxjs/toolkit';import Axios from'axios';import authHeader from'../common/authHeader';import serverUrl from'../common/common';var blogUrl='api/blog';export var getAllBlogsByUserIDAsync=createAsyncThunk('blogs/getAllBlogsByUserIDAsync',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userID){var response,tasks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(serverUrl).concat(blogUrl,\"?userID=\").concat(userID),{headers:authHeader()});case 2:response=_context.sent;tasks=response.data;return _context.abrupt(\"return\",{tasks:tasks});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var getBlogBySlugAsync=createAsyncThunk('blog/getBlogBySlugAsync',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(slug){var response,tasks;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get(\"\".concat(serverUrl).concat(blogUrl,\"/get-blog-by-slug?slug=\").concat(slug),{headers:authHeader()});case 2:response=_context2.sent;tasks=response.data;return _context2.abrupt(\"return\",{tasks:tasks});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var createNewBlogAsync=createAsyncThunk('blog/createNewBlogAsync',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref3){var blogReqData,formData,response,tasks;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:blogReqData=_ref3.blogReqData;formData=new FormData();formData.append('title',blogReqData.title);formData.append('coverImg',blogReqData.coverImg);formData.append('topicID',blogReqData.topicID);formData.append('slug',blogReqData.slug);formData.append('content',blogReqData.content);formData.append('quote',blogReqData.quote);formData.append('date',blogReqData.date);formData.append('location',blogReqData.location);formData.append('published',blogReqData.published);formData.append('signature',blogReqData.signature);_context3.next=14;return Axios.post(serverUrl+blogUrl,formData,{headers:authHeader()});case 14:response=_context3.sent;tasks=response.data;return _context3.abrupt(\"return\",{tasks:tasks});case 17:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}());export var updateBlogAsync=createAsyncThunk('blog/updateBlogAsync',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_ref5){var blogReqData,id,formData,response,tasks;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:blogReqData=_ref5.blogReqData;id=blogReqData._id;formData=new FormData();console.log(id);blogReqData.title&&formData.append('title',blogReqData.title);blogReqData.coverImg&&formData.append('coverImg',blogReqData.coverImg);blogReqData.topicID&&formData.append('topicID',blogReqData.topicID);blogReqData.slug&&formData.append('slug',blogReqData.slug);blogReqData.content&&formData.append('content',blogReqData.content);blogReqData.quote&&formData.append('quote',blogReqData.quote);blogReqData.date&&formData.append('date',blogReqData.date);blogReqData.location&&formData.append('location',blogReqData.location);formData.append('published',blogReqData.published);blogReqData.signature&&formData.append('signature',blogReqData.signature);_context4.next=16;return Axios.put(\"\".concat(serverUrl).concat(blogUrl,\"/\").concat(id),formData,{headers:authHeader()});case 16:response=_context4.sent;tasks=response.data;return _context4.abrupt(\"return\",{tasks:tasks});case 19:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref6.apply(this,arguments);};}());export var deleteBlogAsync=createAsyncThunk('blog/deleteBlogAsync',/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){var response,tasks;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Axios.delete(\"\".concat(serverUrl).concat(blogUrl,\"/\").concat(id),{headers:authHeader()});case 2:response=_context5.sent;window.location.reload(false);tasks=response.data;return _context5.abrupt(\"return\",{tasks:tasks});case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref7.apply(this,arguments);};}());var blogSlice=createSlice({name:'blog',initialState:[],reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,getAllBlogsByUserIDAsync.fulfilled,function(state,action){console.log('fetching blogs by userID successfully');return action.payload.tasks.result;}),_defineProperty(_extraReducers,getBlogBySlugAsync.fulfilled,function(state,action){console.log('fetching blog by slug successfully');return action.payload.tasks.result;}),_defineProperty(_extraReducers,createNewBlogAsync.fulfilled,function(state,action){console.log('added new blog successfully');return action.payload.tasks.result;}),_defineProperty(_extraReducers,updateBlogAsync.fulfilled,function(state,action){console.log('updated blog successfully');return action.payload.tasks.result;}),_extraReducers)});_objectDestructuringEmpty(blogSlice.actions);export{};export var selectPost=function selectPost(state){return state.blog.blog;};export default blogSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","nanoid","Axios","authHeader","serverUrl","blogUrl","getAllBlogsByUserIDAsync","userID","get","headers","response","tasks","data","getBlogBySlugAsync","slug","createNewBlogAsync","blogReqData","formData","FormData","append","title","coverImg","topicID","content","quote","date","location","published","signature","post","updateBlogAsync","id","_id","console","log","put","deleteBlogAsync","delete","window","reload","blogSlice","name","initialState","reducers","extraReducers","fulfilled","state","action","payload","result","actions","selectPost","blog","reducer"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/features/post/blogSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk, nanoid } from '@reduxjs/toolkit';\r\nimport Axios from 'axios';\r\nimport authHeader from '../common/authHeader';\r\nimport serverUrl from '../common/common';\r\n\r\nconst blogUrl = 'api/blog';\r\n\r\nexport const getAllBlogsByUserIDAsync = createAsyncThunk(\r\n    'blogs/getAllBlogsByUserIDAsync',\r\n    async (userID) => {\r\n        const response = await Axios.get(\r\n            `${serverUrl}${blogUrl}?userID=${userID}`,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const getBlogBySlugAsync = createAsyncThunk(\r\n    'blog/getBlogBySlugAsync',\r\n    async (slug) => {\r\n        const response = await Axios.get(\r\n            `${serverUrl}${blogUrl}/get-blog-by-slug?slug=${slug}`,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const createNewBlogAsync = createAsyncThunk(\r\n    'blog/createNewBlogAsync',\r\n    async ({ blogReqData }) => {\r\n        const formData = new FormData();\r\n        formData.append('title', blogReqData.title);\r\n        formData.append('coverImg', blogReqData.coverImg);\r\n        formData.append('topicID', blogReqData.topicID);\r\n        formData.append('slug', blogReqData.slug);\r\n        formData.append('content', blogReqData.content);\r\n        formData.append('quote', blogReqData.quote);\r\n        formData.append('date', blogReqData.date);\r\n        formData.append('location', blogReqData.location);\r\n        formData.append('published', blogReqData.published);\r\n        formData.append('signature', blogReqData.signature);\r\n        const response = await Axios.post(serverUrl + blogUrl, formData, {\r\n            headers: authHeader(),\r\n        });\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const updateBlogAsync = createAsyncThunk(\r\n    'blog/updateBlogAsync',\r\n    async ({ blogReqData }) => {\r\n        const id = blogReqData._id;\r\n        const formData = new FormData();\r\n        console.log(id);\r\n        blogReqData.title && formData.append('title', blogReqData.title);\r\n        blogReqData.coverImg &&\r\n            formData.append('coverImg', blogReqData.coverImg);\r\n        blogReqData.topicID && formData.append('topicID', blogReqData.topicID);\r\n        blogReqData.slug && formData.append('slug', blogReqData.slug);\r\n        blogReqData.content && formData.append('content', blogReqData.content);\r\n        blogReqData.quote && formData.append('quote', blogReqData.quote);\r\n        blogReqData.date && formData.append('date', blogReqData.date);\r\n        blogReqData.location &&\r\n            formData.append('location', blogReqData.location);\r\n        formData.append('published', blogReqData.published);\r\n        blogReqData.signature &&\r\n            formData.append('signature', blogReqData.signature);\r\n        const response = await Axios.put(\r\n            `${serverUrl}${blogUrl}/${id}`,\r\n            formData,\r\n            { headers: authHeader() }\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const deleteBlogAsync = createAsyncThunk(\r\n    'blog/deleteBlogAsync',\r\n    async (id) => {\r\n        const response = await Axios.delete(`${serverUrl}${blogUrl}/${id}`, {\r\n            headers: authHeader(),\r\n        });\r\n        window.location.reload(false);\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nconst blogSlice = createSlice({\r\n    name: 'blog',\r\n    initialState: [],\r\n    reducers: {},\r\n    extraReducers: {\r\n        [getAllBlogsByUserIDAsync.fulfilled]: (state, action) => {\r\n            console.log('fetching blogs by userID successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [getBlogBySlugAsync.fulfilled]: (state, action) => {\r\n            console.log('fetching blog by slug successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [createNewBlogAsync.fulfilled]: (state, action) => {\r\n            console.log('added new blog successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n        [updateBlogAsync.fulfilled]: (state, action) => {\r\n            console.log('updated blog successfully');\r\n            return action.payload.tasks.result;\r\n        },\r\n    },\r\n});\r\nexport const {} = blogSlice.actions;\r\n\r\nexport const selectPost = (state) => state.blog.blog;\r\n\r\nexport default blogSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}