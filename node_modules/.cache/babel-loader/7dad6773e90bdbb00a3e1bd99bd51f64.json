{"ast":null,"code":"import _regeneratorRuntime from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Code/HTML/blog/BlogProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{createNewComment,getAllCommentsByBlogAsync}from'../features/comment/commentSlice';import alt from'../assets/image/user/alt.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Reply=function Reply(_ref){var blogID=_ref.blogID,userID=_ref.userID,isHeadComment=_ref.isHeadComment,parentID=_ref.parentID,setShowReplies=_ref.setShowReplies,setNewReply=_ref.setNewReply;var dispatch=useDispatch();var textareaRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),context=_useState2[0],setContext=_useState2[1];var user=useSelector(function(state){return state.user;});var makeNewComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!context){_context.next=8;break;}_context.next=3;return dispatch(createNewComment({context:context,parentID:parentID,blogID:blogID,userID:userID}));case 3:_context.next=5;return dispatch(getAllCommentsByBlogAsync(blogID));case 5:!isHeadComment&&setShowReplies(true);!isHeadComment&&setNewReply(false);textareaRef.current.value='';case 8:case\"end\":return _context.stop();}}},_callee);}));return function makeNewComment(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"reply\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reply__container \".concat(isHeadComment?'head':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"reply__pfp \".concat(isHeadComment?'head':''),children:(user===null||user===void 0?void 0:user.profilepic)!==''&&(user===null||user===void 0?void 0:user.profilepic)!==undefined?/*#__PURE__*/_jsx(\"img\",{src:'data:image/jpg;base64,'+(user===null||user===void 0?void 0:user.profilepic),alt:alt}):/*#__PURE__*/_jsx(\"img\",{src:alt,alt:alt})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reply__comment-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"content\",className:\"reply__input\",placeholder:\"Leave a comment\",ref:textareaRef,onChange:function onChange(e){return setContext(e.target.value);},onBlur:function onBlur(e){if(e.target.value==='')textareaRef.current.style.height='45px';},onFocus:function onFocus(e){if(e.target.value==='')textareaRef.current.style.height='60px';},onInput:function onInput(e){// textareaRef.current.style.height = '60px';\nvar height=e.target.scrollHeight;if(height>45&&e.target.value!==''){// textareaRef.current.style.height = \"auto\";\ntextareaRef.current.style.height=\"\".concat(height,\"px\");}}}),/*#__PURE__*/_jsx(\"div\",{className:\"reply__post-button\",onClick:makeNewComment,children:/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-send\"})})]})]})});};export default Reply;","map":{"version":3,"names":["React","useRef","useState","useDispatch","useSelector","createNewComment","getAllCommentsByBlogAsync","alt","Reply","blogID","userID","isHeadComment","parentID","setShowReplies","setNewReply","dispatch","textareaRef","context","setContext","user","state","makeNewComment","current","value","profilepic","undefined","e","target","style","height","scrollHeight"],"sources":["D:/Code/HTML/blog/BlogProject/client/src/components/Reply.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n    createNewComment,\r\n    getAllCommentsByBlogAsync,\r\n} from '../features/comment/commentSlice';\r\nimport alt from '../assets/image/user/alt.png';\r\n\r\nconst Reply = ({\r\n    blogID,\r\n    userID,\r\n    isHeadComment,\r\n    parentID,\r\n    setShowReplies,\r\n    setNewReply,\r\n}) => {\r\n    const dispatch = useDispatch();\r\n    const textareaRef = useRef();\r\n    const [context, setContext] = useState('');\r\n    const user = useSelector((state) => state.user);\r\n\r\n    const makeNewComment = async () => {\r\n        if (context) {\r\n            await dispatch(\r\n                createNewComment({\r\n                    context: context,\r\n                    parentID: parentID,\r\n                    blogID: blogID,\r\n                    userID: userID,\r\n                })\r\n            );\r\n            await dispatch(getAllCommentsByBlogAsync(blogID));\r\n            !isHeadComment && setShowReplies(true);\r\n            !isHeadComment && setNewReply(false);\r\n            textareaRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"reply\">\r\n            {/* {!isHeadComment && <div className=\"reply__connect-line\"></div>} */}\r\n            <div className={`reply__container ${isHeadComment ? 'head' : ''}`}>\r\n                <div className={`reply__pfp ${isHeadComment ? 'head' : ''}`}>\r\n                    {user?.profilepic !== '' &&\r\n                    user?.profilepic !== undefined ? (\r\n                        <img\r\n                            src={'data:image/jpg;base64,' + user?.profilepic}\r\n                            alt={alt}\r\n                        />\r\n                    ) : (\r\n                        <img src={alt} alt={alt} />\r\n                    )}\r\n                </div>\r\n                <div className=\"reply__comment-area\">\r\n                    <textarea\r\n                        type=\"text\"\r\n                        name=\"content\"\r\n                        className=\"reply__input\"\r\n                        placeholder=\"Leave a comment\"\r\n                        ref={textareaRef}\r\n                        onChange={(e) => setContext(e.target.value)}\r\n                        onBlur={(e) => {\r\n                            if (e.target.value === '')\r\n                                textareaRef.current.style.height = '45px';\r\n                        }}\r\n                        onFocus={(e) => {\r\n                            if (e.target.value === '')\r\n                                textareaRef.current.style.height = '60px';\r\n                        }}\r\n                        onInput={(e) => {\r\n                            // textareaRef.current.style.height = '60px';\r\n                            let height = e.target.scrollHeight;\r\n                            if (height > 45 && e.target.value !== '') {\r\n                                // textareaRef.current.style.height = \"auto\";\r\n                                textareaRef.current.style.height = `${height}px`;\r\n                            }\r\n                        }}\r\n                    ></textarea>\r\n                    <div\r\n                        className=\"reply__post-button\"\r\n                        onClick={makeNewComment}\r\n                    >\r\n                        <i className=\"bx bxs-send\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Reply;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}